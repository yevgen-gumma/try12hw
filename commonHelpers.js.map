{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderImages(images) {\n  const galleryContainer = document.querySelector('.gallery');\n\n  galleryContainer.innerHTML = '';\n\n  images.forEach(image => {\n    const imageCard = document.createElement('div');\n    imageCard.classList.add('image-card');\n\n    const webformatURL = image.webformatURL;\n    const largeImageURL = image.largeImageURL;\n    const tags = image.tags;\n    const likes = image.likes;\n    const views = image.views;\n    const comments = image.comments;\n    const downloads = image.downloads;\n\n    const imageElement = document.createElement('img');\n    imageElement.classList.add('img');\n    imageElement.src = image.webformatURL;\n    imageElement.alt = image.tags;\n    imageElement.style.width = '100%';\n\n    const infoElement = document.createElement('div');\n    infoElement.classList.add('image-info');\n\n    infoElement.innerHTML = `\n    <p class=\"info-item\">Likes:<br>${likes}</p>\n    <p class=\"info-item\">Views:<br>${views}</p>\n    <p class=\"info-item\">Comments:<br>${comments}</p>\n    <p class=\"info-item\">Downloads:<br>${downloads}</p>\n  `;\n\n    const linkElement = document.createElement('a');\n    linkElement.href = largeImageURL;\n    linkElement.classList.add('gallery-item');\n    linkElement.style.textDecoration = 'none';\n\n    linkElement.appendChild(imageElement);\n    linkElement.appendChild(infoElement);\n\n    imageCard.appendChild(linkElement);\n\n    galleryContainer.appendChild(imageCard);\n  });\n\n  refreshGallery();\n}\n\nfunction refreshGallery() {\n  const gallery = new SimpleLightbox('.gallery-item');\n  gallery.refresh();\n}\n\nexport function renderMoreImages(images) {\n  const galleryContainer = document.querySelector('.gallery');\n\n  // galleryContainer.insertAdjacentHTML(beforeend);\n\n  images.forEach(image => {\n    const imageCard = document.createElement('div');\n    imageCard.classList.add('image-card');\n\n    const webformatURL = image.webformatURL;\n    const largeImageURL = image.largeImageURL;\n    const tags = image.tags;\n    const likes = image.likes;\n    const views = image.views;\n    const comments = image.comments;\n    const downloads = image.downloads;\n\n    const imageElement = document.createElement('img');\n    imageElement.classList.add('img');\n    imageElement.src = image.webformatURL;\n    imageElement.alt = image.tags;\n    imageElement.style.width = '100%';\n\n    const infoElement = document.createElement('div');\n    infoElement.classList.add('image-info');\n    infoElement.innerHTML = `\n    <p class=\"info-item\">Likes:<br>${likes}</p>\n    <p class=\"info-item\">Views:<br>${views}</p>\n    <p class=\"info-item\">Comments:<br>${comments}</p>\n    <p class=\"info-item\">Downloads:<br>${downloads}</p>\n  `;\n\n    const linkElement = document.createElement('a');\n    linkElement.href = largeImageURL;\n    linkElement.classList.add('gallery-item');\n    linkElement.style.textDecoration = 'none';\n\n    linkElement.appendChild(imageElement);\n    linkElement.appendChild(infoElement);\n\n    imageCard.appendChild(linkElement);\n\n    galleryContainer.appendChild(imageCard);\n  });\n\n  refreshGallery();\n}\n","import axios from 'axios';\nimport { renderImages, renderMoreImages } from './render-functions';\n\nlet currentPage = 1;\n\nconst searchForm = document.querySelector('.searchForm');\nconst loadMoreButton = document.querySelector('.load-more-button');\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  await submitSearch();\n  showLoadMoreButton();\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  await loadMoreImages();\n});\n\nfunction showLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more-button');\n  loadMoreButton.style.display = 'inline-block';\n}\n\nexport async function submitSearch() {\n  const searchInput = document.querySelector('.searchInput');\n  const query = searchInput.value.trim();\n  const loader = document.querySelector('.loader');\n  const galleryContainer = document.querySelector('.gallery');\n\n  if (query === '') {\n    iziToast.show({\n      message: 'Please enter a keyword',\n      backgroundColor: 'yellow',\n    });\n    return Promise.reject('Empty query');\n  }\n\n  const apiKey = '42324270-89622daef349524aeb531ebd1';\n  const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${currentPage}`;\n\n  loader.style.display = 'inline-block';\n\n  galleryContainer.innerHTML = '';\n\n  try {\n    const response = await axios.get(apiUrl);\n\n    loader.style.display = 'none';\n\n    if (!response.data.hits || response.data.hits.length === 0) {\n      iziToast.error({\n        color: '#fafafb',\n        backgroundColor: '#ef4040',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      renderImages(response.data.hits);\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error!',\n      message: `An error occurred while fetching data: ${error.message}. Please try again later.`,\n    });\n  }\n}\n\nexport async function loadMoreImages() {\n  currentPage += 1;\n\n  const loader = document.querySelector('.loader');\n  const searchInput = document.querySelector('.searchInput');\n  const query = searchInput.value.trim();\n  const apiKey = '42324270-89622daef349524aeb531ebd1';\n  const newApiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${currentPage}`;\n\n  try {\n    const response = await axios.get(newApiUrl, { cache: 'no-cache' });\n    loader.style.display = 'none';\n\n    if (!response.data.hits || response.data.hits.length === 0) {\n      iziToast.error({\n        color: '#fafafb',\n        backgroundColor: '#ef4040',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      renderMoreImages(response.data.hits);\n      const totalHits = response.data.totalHits || 0;\n      const displayedHits = currentPage * 15;\n      if (displayedHits >= totalHits) {\n        const loadMoreButton = document.querySelector('.loadMoreButton');\n        loadMoreButton.style.display = 'none';\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n      smoothScrollToGallery();\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    iziToast.error({\n      title: 'Error!',\n      message: `An error occurred while fetching data: ${error.message}. Please try again later.`,\n    });\n  }\n}\n\nfunction smoothScrollToGallery() {\n  const galleryContainer = document.querySelector('.gallery');\n  const cardHeight = getCardHeight(galleryContainer);\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction getCardHeight(element) {\n  const firstCard = element.querySelector('.image-card');\n  const rect = firstCard.getBoundingClientRect();\n  return rect.height;\n}\n","import 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { submitSearch, loadMoreImages } from './js/pixabay-api';\n\nconst searchForm = document.querySelector('.searchForm');\n\nsearchForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n  submitSearch();\n});\n\nconst loadMoreButton = document.querySelector('.load-more-button');\nloadMoreButton.addEventListener('click', loadMoreImages);\n"],"names":["renderImages","images","galleryContainer","image","imageCard","largeImageURL","likes","views","comments","downloads","imageElement","infoElement","linkElement","refreshGallery","SimpleLightbox","renderMoreImages","currentPage","searchForm","loadMoreButton","event","submitSearch","showLoadMoreButton","loadMoreImages","query","loader","apiUrl","response","axios","error","newApiUrl","totalHits","smoothScrollToGallery","cardHeight","getCardHeight","element"],"mappings":"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"}